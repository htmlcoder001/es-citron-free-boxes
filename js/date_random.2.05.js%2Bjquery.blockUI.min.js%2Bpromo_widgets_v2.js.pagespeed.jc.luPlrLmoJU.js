var mod_pagespeed_H06hYXkv8M = "(function($,document){var pluses=/\\+/g;function raw(s){return s;}function decoded(s){return decodeURIComponent(s.replace(pluses,' '));}$.cookie=function(key,value,options){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(value))||value==null)){options=$.extend({},$.cookie.defaults,options);if(value==null){options.expires=-1;}if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days);}value=String(value);return(document.cookie=[encodeURIComponent(key),'=',options.raw?value:encodeURIComponent(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}options=value||$.cookie.defaults||{};var decode=options.raw?raw:decoded;var cookies=document.cookie.split('; ');for(var i=0,parts;(parts=cookies[i]&&cookies[i].split('='));i++){if(decode(parts.shift())===key){return decode(parts.join('='));}}return null;};$.cookie.defaults={};})(jQuery,document);(function($){var getByDays=function(days){var name='randDate'+days;if(typeof localStorage!=='undefined'){var time=localStorage.getItem(name);if(time)return time;time=new Date().getTime()-(days*24*60*60*1000);localStorage.setItem(name,time);return time;}else{var time=$.cookie(name);if(time)return time;var time=new Date().getTime()-(days*24*60*60*1000);$.cookie(name,time,{expires:1});return time;}}\nvar daysago_default=29;var getRusMonth=function(month){switch(month){case 1:return window.l_loc.l_pl57;break;case 2:return window.l_loc.l_pl58;break;case 3:return window.l_loc.l_pl59;break;case 4:return window.l_loc.l_pl60;break;case 5:return window.l_loc.l_pl61;break;case 6:return window.l_loc.l_pl62;break;case 7:return window.l_loc.l_pl63;break;case 8:return window.l_loc.l_pl64;break;case 9:return window.l_loc.l_pl65;break;case 10:return window.l_loc.l_pl66;break;case 11:return window.l_loc.l_pl67;break;case 12:return window.l_loc.l_pl68;break;}}\nvar getRusDay=function(day){switch(day){case 0:return window.l_loc.l_pl69;break;case 1:return window.l_loc.l_pl70;break;case 2:return window.l_loc.l_pl71;break;case 3:return window.l_loc.l_pl72;break;case 4:return window.l_loc.l_pl73;break;case 5:return window.l_loc.l_pl74;break;case 6:return window.l_loc.l_pl75;break;}}\nvar dateByFormat=function(date,format){var data={year:date.getFullYear(),monthF:date.getMonth()+1,monthI:date.getMonth()+1,monthS:getRusMonth(date.getMonth()+1),dayF:date.getDate(),dayI:date.getDate(),dayS:getRusDay(date.getDay()),hourF:date.getHours(),minF:date.getMinutes(),secF:date.getSeconds(),weekDayF:date.getDay()}\n$.each(data,function(key,val){if(key!='dayI'&&key!='monthI'){if(val<10)val='0'+val;}format=format.replace(key,val);});return format;}\nvar methods={init:function(options){return this;},rstart:function(){return this.each(function(i){var format=$(this).attr('format');var daysago=$(this).attr('daysago');if(!daysago)daysago=daysago_default;var rStart=new Date(parseInt(getByDays(daysago)));if(format){$(this).html(dateByFormat(rStart,format));}else{$(this).html(dateByFormat(rStart,'dayI monthS year'));}});},rdate:function(){let elements=$(this);elements.sort(function(a,b){let aI=parseInt($(a).attr('sort'));let bI=parseInt($(b).attr('sort'));return(isNaN(aI)?0:aI)-(isNaN(bI)?0:bI);});let sorts_count={};return elements.each(function(x,el){let sort=parseInt($(this).attr('sort'));let z_roll_back=0;if(!isNaN(sort)){if(typeof sorts_count[sort]=='undefined'){sorts_count[sort]=0;}sorts_count[sort]++;if(sorts_count[sort]>1){z_roll_back=sorts_count[sort]-1;}}var format=$(this).attr('format');var daysago=$(this).attr('daysago');var dayindex=parseFloat($(this).attr('dayindex'));if(!daysago)daysago=daysago_default;if(!dayindex)dayindex=0;var rStart=new Date(parseInt(getByDays(daysago)));var z=x+dayindex;z-=z_roll_back;var nextDate=new Date(rStart.getTime()+(z*(12+z)*(60+x)*60*(1000+x)));if(format){$(this).html(dateByFormat(nextDate,format));}else{$(this).html(dateByFormat(nextDate,'dayF.monthF.year hourF:minF'));}});},ryear:function(){return this.each(function(i){var value=$(this).data(\"decrease\"),decrease=value&&value>0&&value===parseInt(+value,10)&&!isNaN(parseInt(value))?value:0;$(this).html(new Date().getFullYear()-decrease);});},rnow:function(){return this.each(function(i){var format=$(this).attr('format');var nowDate=new Date();if(format){$(this).html(dateByFormat(nowDate,format));}else{$(this).html(dateByFormat(nowDate,'dayI monthS'));}});}};$.fn.randDate=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Метод с именем '+method+' не существует для jQuery.randDate');}};})(jQuery);$(function(){$('.rstart, .startdate').randDate('rstart');$('.rdate, .ypdate, .randdate').randDate('rdate');$('.ryear, .nowyear').randDate('ryear');$('.rnow, .nowdate').randDate('rnow');});";
var mod_pagespeed_E9UBiTREa8 = "!function(){\"use strict\";function e(x){x.fn._fadeIn=x.fn.fadeIn;var C=x.noop||function(){},S=/MSIE/.test(navigator.userAgent),O=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),E=(document.documentMode,x.isFunction(document.createElement(\"div\").style.setExpression));x.blockUI=function(e){o(window,e)},x.unblockUI=function(e){B(window,e)},x.growlUI=function(e,t,o,i){var n=x('<div class=\"growlUI\"></div>');e&&n.append(\"<h1>\"+e+\"</h1>\"),t&&n.append(\"<h2>\"+t+\"</h2>\"),void 0===o&&(o=3e3);function s(e){e=e||{},x.blockUI({message:n,fadeIn:void 0!==e.fadeIn?e.fadeIn:700,fadeOut:void 0!==e.fadeOut?e.fadeOut:1e3,timeout:void 0!==e.timeout?e.timeout:o,centerY:!1,showOverlay:!1,onUnblock:i,css:x.blockUI.defaults.growlCSS})}s();n.css(\"opacity\");n.mouseover(function(){s({fadeIn:0,timeout:3e4});var e=x(\".blockMsg\");e.stop(),e.fadeTo(300,1)}).mouseout(function(){x(\".blockMsg\").fadeOut(1e3)})},x.fn.block=function(e){if(this[0]===window)return x.blockUI(e),this;var t=x.extend({},x.blockUI.defaults,e||{});return this.each(function(){var e=x(this);t.ignoreIfBlocked&&e.data(\"blockUI.isBlocked\")||e.unblock({fadeOut:0})}),this.each(function(){\"static\"==x.css(this,\"position\")&&(this.style.position=\"relative\",x(this).data(\"blockUI.static\",!0)),this.style.zoom=1,o(this,e)})},x.fn.unblock=function(e){return this[0]===window?(x.unblockUI(e),this):this.each(function(){B(this,e)})},x.blockUI.version=2.66,x.blockUI.defaults={message:\"\",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:\"30%\",top:\"40%\",left:\"35%\",textAlign:\"center\",color:\"#000\",opacity:1,cursor:\"wait\"},themedCSS:{width:\"30%\",top:\"40%\",left:\"35%\"},overlayCSS:{backgroundColor:\"#fff\",opacity:.6,cursor:\"wait\"},cursorReset:\"default\",growlCSS:{width:\"350px\",top:\"10px\",left:\"\",right:\"10px\",border:\"none\",padding:\"5px\",opacity:.6,cursor:\"default\",color:\"#fff\",backgroundColor:\"#fff\",\"-webkit-border-radius\":\"10px\",\"-moz-border-radius\":\"10px\",\"border-radius\":\"10px\"},iframeSrc:/^https/i.test(window.location.href||\"\")?\"javascript:false\":\"about:blank\",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:\":input:enabled:visible\",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:\"blockMsg\",ignoreIfBlocked:!1};var T=null,M=[];function o(e,n){var t,o,s=e==window,i=n&&void 0!==n.message?n.message:void 0;if(!(n=x.extend({},x.blockUI.defaults,n||{})).ignoreIfBlocked||!x(e).data(\"blockUI.isBlocked\")){if(n.overlayCSS=x.extend({},x.blockUI.defaults.overlayCSS,n.overlayCSS||{}),t=x.extend({},x.blockUI.defaults.css,n.css||{}),n.onOverlayClick&&(n.overlayCSS.cursor=\"pointer\"),o=x.extend({},x.blockUI.defaults.themedCSS,n.themedCSS||{}),i=void 0===i?n.message:i,s&&T&&B(window,{fadeOut:0}),i&&\"string\"!=typeof i&&(i.parentNode||i.jquery)){var l=i.jquery?i[0]:i,a={};x(e).data(\"blockUI.history\",a),a.el=l,a.parent=l.parentNode,a.display=l.style.display,a.position=l.style.position,a.parent&&a.parent.removeChild(l)}x(e).data(\"blockUI.onUnblock\",n.onUnblock);var d,c,r,u,f=n.baseZ;d=S||n.forceIframe?x('<iframe class=\"blockUI\" style=\"z-index:'+f+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0\" src=\"'+n.iframeSrc+'\"></iframe>'):x('<div class=\"blockUI\" style=\"display:none\"></div>'),c=n.theme?x('<div class=\"blockUI blockOverlay ui-widget-overlay\" style=\"z-index:'+f+++';display:none\"></div>'):x('<div class=\"blockUI blockOverlay\" style=\"z-index:'+f+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0\"></div>'),n.theme&&s?(u='<div class=\"blockUI '+n.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all\" style=\"z-index:'+(f+10)+';display:none;position:fixed\">',n.title&&(u+='<div class=\"ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle\">'+(n.title||\"&nbsp;\")+\"</div>\"),u+='<div class=\"ui-widget-content ui-dialog-content\"></div>',u+=\"</div>\"):n.theme?(u='<div class=\"blockUI '+n.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all\" style=\"z-index:'+(f+10)+';display:none;position:absolute\">',n.title&&(u+='<div class=\"ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle\">'+(n.title||\"&nbsp;\")+\"</div>\"),u+='<div class=\"ui-widget-content ui-dialog-content\"></div>',u+=\"</div>\"):u=s?'<div class=\"blockUI '+n.blockMsgClass+' blockPage\" style=\"z-index:'+(f+10)+';display:none;position:fixed\"></div>':'<div class=\"blockUI '+n.blockMsgClass+' blockElement\" style=\"z-index:'+(f+10)+';display:none;position:absolute\"></div>',r=x(u),i&&(n.theme?(r.css(o),r.addClass(\"ui-widget-content\")):r.css(t)),n.theme||c.css(n.overlayCSS),c.css(\"position\",s?\"fixed\":\"absolute\"),(S||n.forceIframe)&&d.css(\"opacity\",0);var p=[d,c,r],b=x(s?\"body\":e);x.each(p,function(){this.appendTo(b)}),n.theme&&n.draggable&&x.fn.draggable&&r.draggable({handle:\".ui-dialog-titlebar\",cancel:\"li\"});var h=E&&(!x.support.boxModel||0<x(\"object,embed\",s?null:e).length);if(O||h){if(s&&n.allowBodyStretch&&x.support.boxModel&&x(\"html,body\").css(\"height\",\"100%\"),(O||!x.support.boxModel)&&!s)var k=z(e,\"borderTopWidth\"),y=z(e,\"borderLeftWidth\"),m=k?\"(0 - \"+k+\")\":0,v=y?\"(0 - \"+y+\")\":0;x.each(p,function(e,t){var o=t[0].style;if(o.position=\"absolute\",e<2)s?o.setExpression(\"height\",\"Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:\"+n.quirksmodeOffsetHack+') + \"px\"'):o.setExpression(\"height\",'this.parentNode.offsetHeight + \"px\"'),s?o.setExpression(\"width\",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + \"px\"'):o.setExpression(\"width\",'this.parentNode.offsetWidth + \"px\"'),v&&o.setExpression(\"left\",v),m&&o.setExpression(\"top\",m);else if(n.centerY)s&&o.setExpression(\"top\",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + \"px\"'),o.marginTop=0;else if(!n.centerY&&s){var i=\"((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + \"+(n.css&&n.css.top?parseInt(n.css.top,10):0)+') + \"px\"';o.setExpression(\"top\",i)}})}if(i&&(n.theme?r.find(\".ui-widget-content\").append(i):r.append(i),(i.jquery||i.nodeType)&&x(i).show()),(S||n.forceIframe)&&n.showOverlay&&d.show(),n.fadeIn){var g=n.onBlock?n.onBlock:C,I=n.showOverlay&&!i?g:C,w=i?g:C;n.showOverlay&&c._fadeIn(n.fadeIn,I),i&&r._fadeIn(n.fadeIn,w)}else n.showOverlay&&c.show(),i&&r.show(),n.onBlock&&n.onBlock();if(j(1,e,n),s?(T=r[0],M=x(n.focusableElements,T),n.focusInput&&setTimeout(H,20)):function(e,t,o){var i=e.parentNode,n=e.style,s=(i.offsetWidth-e.offsetWidth)/2-z(i,\"borderLeftWidth\"),l=(i.offsetHeight-e.offsetHeight)/2-z(i,\"borderTopWidth\");t&&(n.left=0<s?s+\"px\":\"0\");o&&(n.top=0<l?l+\"px\":\"0\")}(r[0],n.centerX,n.centerY),n.timeout){var U=setTimeout(function(){s?x.unblockUI(n):x(e).unblock(n)},n.timeout);x(e).data(\"blockUI.timeout\",U)}}}function B(e,t){var o,i,n=e==window,s=x(e),l=s.data(\"blockUI.history\"),a=s.data(\"blockUI.timeout\");a&&(clearTimeout(a),s.removeData(\"blockUI.timeout\")),t=x.extend({},x.blockUI.defaults,t||{}),j(0,e,t),null===t.onUnblock&&(t.onUnblock=s.data(\"blockUI.onUnblock\"),s.removeData(\"blockUI.onUnblock\")),i=n?x(\"body\").children().filter(\".blockUI\").add(\"body > .blockUI\"):s.find(\">.blockUI\"),t.cursorReset&&(1<i.length&&(i[1].style.cursor=t.cursorReset),2<i.length&&(i[2].style.cursor=t.cursorReset)),n&&(T=M=null),t.fadeOut?(o=i.length,i.stop().fadeOut(t.fadeOut,function(){0==--o&&d(i,l,t,e)})):d(i,l,t,e)}function d(e,t,o,i){var n=x(i);if(!n.data(\"blockUI.isBlocked\")){e.each(function(e,t){this.parentNode&&this.parentNode.removeChild(this)}),t&&t.el&&(t.el.style.display=t.display,t.el.style.position=t.position,t.parent&&t.parent.appendChild(t.el),n.removeData(\"blockUI.history\")),n.data(\"blockUI.static\")&&n.css(\"position\",\"static\"),\"function\"==typeof o.onUnblock&&o.onUnblock(i,o);var s=x(document.body),l=s.width(),a=s[0].style.width;s.width(l-1).width(l),s[0].style.width=a}}function j(e,t,o){var i=t==window,n=x(t);if((e||(!i||T)&&(i||n.data(\"blockUI.isBlocked\")))&&(n.data(\"blockUI.isBlocked\",e),i&&o.bindEvents&&(!e||o.showOverlay))){var s=\"mousedown mouseup keydown keypress keyup touchstart touchend touchmove\";e?x(document).bind(s,o,l):x(document).unbind(s,l)}}function l(e){if(\"keydown\"===e.type&&e.keyCode&&9==e.keyCode&&T&&e.data.constrainTabKey){var t=!e.shiftKey&&e.target===M[M.length-1],o=e.shiftKey&&e.target===M[0];if(t||o)return setTimeout(function(){H(o)},10),!1}var i=e.data,n=x(e.target);return n.hasClass(\"blockOverlay\")&&i.onOverlayClick&&i.onOverlayClick(e),0<n.parents(\"div.\"+i.blockMsgClass).length||0===n.parents().children().filter(\"div.blockUI\").length}function H(e){if(M){var t=M[!0===e?M.length-1:0];t&&t.focus()}}function z(e,t){return parseInt(x.css(e,t),10)||0}}\"function\"==typeof define&&define.amd&&define.amd.jQuery?define([\"jquery\"],e):e(jQuery)}();";
var mod_pagespeed_ZDX37iNwcv = "function css_browser_selector(a){var d=a.toLowerCase(),e=function(a){return-1<d.indexOf(a)},f=document.documentElement,g=[!/opera|webtv/i.test(d)&&/msie\\s(\\d)/.test(d)?\"ie ie\"+RegExp.$1:e(\"firefox/2\")?\"gecko ff2\":e(\"firefox/3.5\")?\"gecko ff3 ff3_5\":e(\"firefox/3.6\")?\"gecko ff3 ff3_6\":e(\"firefox/3\")?\"gecko ff3\":e(\"gecko/\")?\"gecko\":e(\"opera\")?\"opera\"+(/version\\/(\\d+)/.test(d)?\" opera\"+RegExp.$1:/opera(\\s|\\/)(\\d+)/.test(d)?\" opera\"+RegExp.$2:\"\"):e(\"konqueror\")?\"konqueror\":e(\"blackberry\")?\"mobile blackberry\":e(\"android\")?\"mobile android\":e(\"chrome\")?\"webkit chrome\":e(\"iron\")?\"webkit iron\":e(\"applewebkit/\")?\"webkit safari\"+(/version\\/(\\d+)/.test(d)?\" safari\"+RegExp.$1:\"\"):e(\"mozilla/\")?\"gecko\":\"\",e(\"j2me\")?\"mobile j2me\":e(\"iphone\")?\"mobile iphone\":e(\"ipod\")?\"mobile ipod\":e(\"ipad\")?\"mobile ipad\":e(\"mac\")?\"mac\":e(\"darwin\")?\"mac\":e(\"webtv\")?\"webtv\":e(\"win\")?\"win\"+(e(\"windows nt 6.0\")?\" vista\":\"\"):e(\"freebsd\")?\"freebsd\":e(\"x11\")||e(\"linux\")?\"linux\":\"\",\"js\"];return c=g.join(\" \"),f.className+=\" \"+c,c}css_browser_selector(navigator.userAgent),function(a){\"object\"==typeof exports?module.exports=a(require(\"jquery\")):\"function\"==typeof define&&define.amd?define([\"jquery\"],a):a(jQuery)}(function(a){\"use strict\";var b={},d=Math.max,f=Math.min;b.c={},b.c.d=a(document),b.c.t=function(a){return a.originalEvent.touches.length-1},b.o=function(){var f=this;this.o=null,this.$=null,this.i=null,this.g=null,this.v=null,this.cv=null,this.x=0,this.y=0,this.w=0,this.h=0,this.$c=null,this.c=null,this.t=0,this.isInit=!1,this.fgColor=null,this.pColor=null,this.dH=null,this.cH=null,this.eH=null,this.rH=null,this.scale=1,this.relative=!1,this.relativeWidth=!1,this.relativeHeight=!1,this.$div=null,this.run=function(){var b=function(a,b){for(var d in b)f.o[d]=b[d];f._carve().init(),f._configure()._draw()};if(!this.$.data(\"kontroled\")){if(this.$.data(\"kontroled\",!0),this.extend(),this.o=a.extend({min:void 0===this.$.data(\"min\")?0:this.$.data(\"min\"),max:void 0===this.$.data(\"max\")?100:this.$.data(\"max\"),stopper:!0,readOnly:this.$.data(\"readonly\")||\"readonly\"===this.$.attr(\"readonly\"),cursor:!0===this.$.data(\"cursor\")&&30||this.$.data(\"cursor\")||0,thickness:this.$.data(\"thickness\")&&Math.max(Math.min(this.$.data(\"thickness\"),1),.01)||.35,lineCap:this.$.data(\"linecap\")||\"butt\",width:this.$.data(\"width\")||200,height:this.$.data(\"height\")||200,displayInput:null==this.$.data(\"displayinput\")||this.$.data(\"displayinput\"),displayPrevious:this.$.data(\"displayprevious\"),fgColor:this.$.data(\"fgcolor\")||\"#87CEEB\",inputColor:this.$.data(\"inputcolor\"),font:this.$.data(\"font\")||\"Arial\",fontWeight:this.$.data(\"font-weight\")||\"bold\",inline:!1,step:this.$.data(\"step\")||1,rotation:this.$.data(\"rotation\"),draw:null,change:null,cancel:null,release:null,format:function(a){return a},parse:function(a){return parseFloat(a)}},this.o),this.o.flip=\"anticlockwise\"===this.o.rotation||\"acw\"===this.o.rotation,this.o.inputColor||(this.o.inputColor=this.o.fgColor),this.$.is(\"fieldset\")?(this.v={},this.i=this.$.find(\"input\"),this.i.each(function(b){var d=a(this);f.i[b]=d,f.v[b]=f.o.parse(d.val()),d.bind(\"change blur\",function(){var a={};a[b]=d.val(),f.val(f._validate(a))})}),this.$.find(\"legend\").remove()):(this.i=this.$,this.v=this.o.parse(this.$.val()),\"\"===this.v&&(this.v=this.o.min),this.$.bind(\"change blur\",function(){f.val(f._validate(f.o.parse(f.$.val())))})),this.o.displayInput||this.$.hide(),this.$c=a(document.createElement(\"canvas\")).attr({width:this.o.width,height:this.o.height}),this.$div=a(\"<div style=\\\"\"+(this.o.inline?\"display:inline;\":\"\")+\"width:\"+this.o.width+\"px;height:\"+this.o.height+\"px;\\\"></div>\"),this.$.wrap(this.$div).before(this.$c),this.$div=this.$.parent(),\"undefined\"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.$c[0]),this.c=this.$c[0].getContext?this.$c[0].getContext(\"2d\"):null,!this.c)throw{name:\"CanvasNotSupportedException\",message:\"Canvas not supported. Please use excanvas on IE8.0.\",toString:function(){return this.name+\": \"+this.message}};return this.scale=(window.devicePixelRatio||1)/(this.c.webkitBackingStorePixelRatio||this.c.mozBackingStorePixelRatio||this.c.msBackingStorePixelRatio||this.c.oBackingStorePixelRatio||this.c.backingStorePixelRatio||1),this.relativeWidth=0!=this.o.width%1&&this.o.width.indexOf(\"%\"),this.relativeHeight=0!=this.o.height%1&&this.o.height.indexOf(\"%\"),this.relative=this.relativeWidth||this.relativeHeight,this._carve(),this.v instanceof Object?(this.cv={},this.copy(this.v,this.cv)):this.cv=this.v,this.$.bind(\"configure\",b).parent().bind(\"configure\",b),this._listen()._configure()._xy().init(),this.isInit=!0,this.$.val(this.o.format(this.v)),this._draw(),this}},this._carve=function(){if(this.relative){var a=this.relativeWidth?this.$div.parent().width()*parseInt(this.o.width)/100:this.$div.parent().width(),b=this.relativeHeight?this.$div.parent().height()*parseInt(this.o.height)/100:this.$div.parent().height();this.w=this.h=Math.min(a,b)}else this.w=this.o.width,this.h=this.o.height;return this.$div.css({width:this.w+\"px\",height:this.h+\"px\"}),this.$c.attr({width:this.w,height:this.h}),1!==this.scale&&(this.$c[0].width*=this.scale,this.$c[0].height*=this.scale,this.$c.width(this.w),this.$c.height(this.h)),this},this._draw=function(){var a=!0;f.g=f.c,f.clear(),f.dH&&(a=f.dH()),!1!==a&&f.draw()},this._touch=function(a){var d=function(a){var b=f.xy2val(a.originalEvent.touches[f.t].pageX,a.originalEvent.touches[f.t].pageY);b==f.cv||f.cH&&!1===f.cH(b)||(f.change(f._validate(b)),f._draw())};return this.t=b.c.t(a),d(a),b.c.d.bind(\"touchmove.k\",d).bind(\"touchend.k\",function(){b.c.d.unbind(\"touchmove.k touchend.k\"),f.val(f.cv)}),this},this._mouse=function(a){var d=function(a){var b=f.xy2val(a.pageX,a.pageY);b==f.cv||f.cH&&!1===f.cH(b)||(f.change(f._validate(b)),f._draw())};return d(a),b.c.d.bind(\"mousemove.k\",d).bind(\"keyup.k\",function(a){if(27===a.keyCode){if(b.c.d.unbind(\"mouseup.k mousemove.k keyup.k\"),f.eH&&!1===f.eH())return;f.cancel()}}).bind(\"mouseup.k\",function(){b.c.d.unbind(\"mousemove.k mouseup.k keyup.k\"),f.val(f.cv)}),this},this._xy=function(){var a=this.$c.offset();return this.x=a.left,this.y=a.top,this},this._listen=function(){return this.o.readOnly?this.$.attr(\"readonly\",\"readonly\"):(this.$c.bind(\"mousedown\",function(a){a.preventDefault(),f._xy()._mouse(a)}).bind(\"touchstart\",function(a){a.preventDefault(),f._xy()._touch(a)}),this.listen()),this.relative&&a(window).resize(function(){f._carve().init(),f._draw()}),this},this._configure=function(){return this.o.draw&&(this.dH=this.o.draw),this.o.change&&(this.cH=this.o.change),this.o.cancel&&(this.eH=this.o.cancel),this.o.release&&(this.rH=this.o.release),this.o.displayPrevious?(this.pColor=this.h2rgba(this.o.fgColor,\"0.4\"),this.fgColor=this.h2rgba(this.o.fgColor,\"0.6\")):this.fgColor=this.o.fgColor,this},this._clear=function(){this.$c[0].width=this.$c[0].width},this._validate=function(a){var b=~~((0>a?-.5:.5)+a/this.o.step)*this.o.step;return Math.round(100*b)/100},this.listen=function(){},this.extend=function(){},this.init=function(){},this.change=function(){},this.val=function(){},this.xy2val=function(){},this.draw=function(){},this.clear=function(){this._clear()},this.h2rgba=function(b,d){var a;return b=b.substring(1,7),a=[parseInt(b.substring(0,2),16),parseInt(b.substring(2,4),16),parseInt(b.substring(4,6),16)],\"rgba(\"+a[0]+\",\"+a[1]+\",\"+a[2]+\",\"+d+\")\"},this.copy=function(a,b){for(var d in a)b[d]=a[d]}},b.Dial=function(){b.o.call(this),this.startAngle=null,this.xy=null,this.radius=null,this.lineWidth=null,this.cursorExt=null,this.w2=null,this.PI2=2*Math.PI,this.extend=function(){this.o=a.extend({bgColor:this.$.data(\"bgcolor\")||\"#EEEEEE\",angleOffset:this.$.data(\"angleoffset\")||0,angleArc:this.$.data(\"anglearc\")||360,inline:!0},this.o)},this.val=function(a,b){if(null!=a){if(a=this.o.parse(a),!1!==b&&a!=this.v&&this.rH&&!1===this.rH(a))return;this.cv=this.o.stopper?d(f(a,this.o.max),this.o.min):a,this.v=this.cv,this.$.val(this.o.format(this.v)),this._draw()}else return this.v},this.xy2val=function(b,e){var g,h;return g=Math.atan2(b-(this.x+this.w2),-(e-this.y-this.w2))-this.angleOffset,this.o.flip&&(g=this.angleArc-g-this.PI2),this.angleArc!=this.PI2&&0>g&&-.5<g?g=0:0>g&&(g+=this.PI2),h=g*(this.o.max-this.o.min)/this.angleArc+this.o.min,this.o.stopper&&(h=d(f(h,this.o.max),this.o.min)),h},this.listen=function(){var b,g,h,i,j=this,e=function(a){a.preventDefault();var e=a.originalEvent,h=e.detail||e.wheelDeltaX,i=e.detail||e.wheelDeltaY,k=j._validate(j.o.parse(j.$.val()))+(0<h||0<i?j.o.step:0>h||0>i?-j.o.step:0);k=d(f(k,j.o.max),j.o.min),j.val(k,!1),j.rH&&(clearTimeout(b),b=setTimeout(function(){j.rH(k),b=null},100),!g&&(g=setTimeout(function(){b&&j.rH(k),g=null},200)))},k=1,l={37:-j.o.step,38:j.o.step,39:j.o.step,40:-j.o.step};this.$.bind(\"keydown\",function(b){var e=b.keyCode;if(96<=e&&105>=e&&(e=b.keyCode=e-48),h=parseInt(String.fromCharCode(e)),isNaN(h)&&(13!==e&&8!==e&&9!==e&&189!==e&&(190!==e||j.$.val().match(/\\./))&&b.preventDefault(),-1<a.inArray(e,[37,38,39,40]))){b.preventDefault();var g=j.o.parse(j.$.val())+l[e]*k;j.o.stopper&&(g=d(f(g,j.o.max),j.o.min)),j.change(j._validate(g)),j._draw(),i=window.setTimeout(function(){k*=2},30)}}).bind(\"keyup\",function(){isNaN(h)?i&&(window.clearTimeout(i),i=null,k=1,j.val(j.$.val())):j.$.val()>j.o.max&&j.$.val(j.o.max)||j.$.val()<j.o.min&&j.$.val(j.o.min)}),this.$c.bind(\"mousewheel DOMMouseScroll\",e),this.$.bind(\"mousewheel DOMMouseScroll\",e)},this.init=function(){(this.v<this.o.min||this.v>this.o.max)&&(this.v=this.o.min),this.$.val(this.v),this.w2=this.w/2,this.cursorExt=this.o.cursor/100,this.xy=this.w2*this.scale,this.lineWidth=this.xy*this.o.thickness,this.lineCap=this.o.lineCap,this.radius=this.xy-this.lineWidth/2,this.o.angleOffset&&(this.o.angleOffset=isNaN(this.o.angleOffset)?0:this.o.angleOffset),this.o.angleArc&&(this.o.angleArc=isNaN(this.o.angleArc)?this.PI2:this.o.angleArc),this.angleOffset=this.o.angleOffset*Math.PI/180,this.angleArc=this.o.angleArc*Math.PI/180,this.startAngle=1.5*Math.PI+this.angleOffset,this.endAngle=1.5*Math.PI+this.angleOffset+this.angleArc;var a=d((Math.abs(this.o.max)+\"\").length,(Math.abs(this.o.min)+\"\").length,2)+2;this.o.displayInput&&this.i.css({width:(this.w/2+4>>0)+\"px\",height:(this.w/3>>0)+\"px\",position:\"absolute\",\"vertical-align\":\"middle\",\"margin-top\":(this.w/3>>0)+\"px\",\"margin-left\":\"-\"+(3*this.w/4+2>>0)+\"px\",border:0,background:\"none\",font:this.o.fontWeight+\" \"+(this.w/a>>0)+\"px \"+this.o.font,\"text-align\":\"center\",color:this.o.inputColor||this.o.fgColor,padding:\"0px\",\"-webkit-appearance\":\"none\"})||this.i.css({width:\"0px\",visibility:\"hidden\"})},this.change=function(a){this.cv=a,this.$.val(this.o.format(a))},this.angle=function(a){return(a-this.o.min)*this.angleArc/(this.o.max-this.o.min)},this.arc=function(a){var b,d;return a=this.angle(a),this.o.flip?(b=this.endAngle+1e-5,d=b-a-1e-5):(b=this.startAngle-1e-5,d=b+a+1e-5),this.o.cursor&&(b=d-this.cursorExt)&&(d+=this.cursorExt),{s:b,e:d,d:this.o.flip&&!this.o.cursor}},this.draw=function(){var b,d=this.g,e=this.arc(this.cv),a=1;d.lineWidth=this.lineWidth,d.lineCap=this.lineCap,\"none\"!==this.o.bgColor&&(d.beginPath(),d.strokeStyle=this.o.bgColor,d.arc(this.xy,this.xy,this.radius,this.endAngle-1e-5,this.startAngle+1e-5,!0),d.stroke()),this.o.displayPrevious&&(b=this.arc(this.v),d.beginPath(),d.strokeStyle=this.pColor,d.arc(this.xy,this.xy,this.radius,b.s,b.e,b.d),d.stroke(),a=this.cv==this.v),d.beginPath(),d.strokeStyle=a?this.o.fgColor:this.fgColor,d.arc(this.xy,this.xy,this.radius,e.s,e.e,e.d),d.stroke()},this.cancel=function(){this.val(this.v)}},a.fn.dial=a.fn.knob=function(e){return this.each(function(){var f=new b.Dial;f.o=e,f.$=a(this),f.run()}).parent()}});";
